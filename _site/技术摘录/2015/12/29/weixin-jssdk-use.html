
<!DOCTYPE html>
<html lang="en" xmlns:wb="http://open.weibo.com/wb">
<head>
    <meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="baidu-site-verification" content="MCykuGqiPQ"/>
<meta name="keywords" content="Fukas's blog!, Fukas, sunfuchang, 微信开发,jssdk,分享,签名"/>
<meta name="description" content="Fukas's blog!, Fukas, 最近开发微信活动的时候，发现分享到朋友圈和发送给朋友功能不稳定，时而有效时而无效，打开debug模式查看，发现多数报的数签名错误，仔细看了官方文档，最终问题出在ticket的缓存上。"/>

<title> 微信分享到朋友圈、发送给朋友开发注意事项 </title>

<meta name="author" content="fukas">
<!-- Enable responsive viewport -->
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

<!-- sina weibo -->
<meta property="wb:webmaster" content="01d60bef1678aca3"/>

<!-- google fonts -->
<!--<link href="http://fonts.useso.com/css?family=PT+Serif:400,700,400italic,700itali" rel="stylesheet">-->
<!--<link href="http://fonts.useso.com/css?family=Raleway:400,900,800,700,500,200,100,600" rel="stylesheet">-->

<!-- Bootstrap styles -->
<link rel="stylesheet" href="/assets/themes/medigo/bootstrap/bootstrap.css">
<link rel="stylesheet" href="/assets/themes/medigo/css/misc.css">
<link rel="stylesheet" href="/assets/themes/medigo/css/blue-scheme.css">
<link href="/assets/css/style.css" rel="stylesheet" type="text/css" media="all">
<!-- syntax css -->
<link href="/assets/css/main.css" rel="stylesheet" type="text/css" media="all">
<link href="/assets/css/normalize.css" rel="stylesheet" type="text/css" media="all">
<link href="/assets/css/syntax.css" rel="stylesheet" type="text/css" media="all">
<link href="/assets/css/pygment_trac.css" rel="stylesheet" type="text/css" media="all">
<link href="/assets/css/stylesheet.css" rel="stylesheet" type="text/css" media="all">

<!-- JavaScripts -->
<script src="/assets/themes/medigo/js/jquery-1.10.2.min.js"></script>
<script src="/assets/themes/medigo/js/jquery-migrate-1.2.1.min.js"></script>

<link rel="shortcut icon" href="/assets/themes/medigo/images/favicon.ico" type="image/x-icon"/>

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
<!--<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>-->
<!--<script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>-->
<![endif]-->

<!-- atom & rss feed -->
<link href="/atom.xml" type="application/atom+xml" rel="alternate"
      title="Sitewide ATOM Feed">
<link href="/rss.xml" type="application/rss+xml" rel="alternate"
      title="Sitewide RSS Feed">	
</head>
<body>
<div class="responsive_menu">
      <ul class="main_menu">
            <li><a href="/index.html">Home</a></li>
            <!--<li><a href="#">Portfolio</a></li>-->
            <li><a href="/blog/index.html">Blog</a></li>
            <li><a href="/about.html">About</a></li>
            <li><a href="/concat.html">Contact</a></li>
      </ul>
      <!-- /.main_menu -->
</div>
<!-- /.responsive_menu -->

<header class="site-header clearfix">
      <div class="container">
            <div class="row">
                  <div class="col-md-12">
                        <div class="pull-left logo">
                              <a href="index.html" style="font-size: 1.8em!important; font-weight: bold; font-family: sans-serif;">
                                    <img src="/assets/themes/medigo/images/favicon.ico" style="width: 12%;" alt="Medigo by templatemo">
                                    Fukas's blog!
                              </a>
                        </div>
                        <!-- /.logo -->

                        <div class="main-navigation pull-right">
                              <nav class="main-nav visible-md visible-lg">
                                    <ul class="sf-menu">
                                          <li class=""><a href="/index.html">Home</a></li>
                                          <!--<li><a href="#">Portfolio</a></li>-->
                                          <!-- 添加分页后，index。html -->
                                          <li class=" active "><a href="/blog/index.html">Blog</a></li>
                                          <li class=""><a href="/about.html">About</a></li>
                                          <li class=""><a href="/concat.html">Contact</a></li>
                                    </ul>
                                    <!-- /.sf-menu -->
                              </nav>
                              <!-- /.main-nav -->
                              <!-- This one in here is responsive menu for tablet and mobiles -->
                              <div class="responsive-navigation visible-sm visible-xs">
                                    <a href="#nogo" class="menu-toggle-btn">
                                          <i class="fa fa-bars"></i>
                                    </a>
                              </div>
                              <!-- /responsive_navigation -->
                        </div>
                        <!-- /.main-navigation -->
                  </div>
                  <!-- /.col-md-12 -->
            </div>
            <!-- /.row -->
      </div>
      <!-- /.container -->
</header>
<!-- /.site-header -->

<div class="first-widget parallax" style="background-image: url('/assets/themes/medigo/images/includes/blogbg1.jpg')" id="blogId">
    <div class="parallax-overlay">
        <div class="container pageTitle">
            <div class="row">
                <div class="col-md-6 col-sm-6">
                    <h2 class="page-title">Blog Single</h2>
                </div>
                <!-- /.col-md-6 -->
                <div class="col-md-6 col-sm-6 text-right">
                    <span class="page-location">Home / Blog Single</span>
                </div>
                <!-- /.col-md-6 -->
            </div>
            <!-- /.row -->
        </div>
        <!-- /.container -->
    </div>
    <!-- /.parallax-overlay -->
</div> <!-- /.pageTitle -->

<div class="container">
    <div class="row">
        <div class="col-md-8 blog-posts">
            <div class="row">
                <div class="col-md-12">
                    <div class="thunm-bread">
                      <span class="meta-date"><a href="#">Blog</a></span>            
                            <span class="meta-comments">
                                <a href="#">
                                    文章详情
                                </a>
                            </span>     
                        </div>
                    <div class="post-blog">
                        <div class="blog-image">
                            <img src="/assets/themes/medigo/images/includes/blog1.jpg" alt="">
                        </div>
                        <!-- /.blog-image -->
                        <div class="blog-content">
                            <span class="meta-date"><a href="#">2015年12月29日</a></span>
                            
                                <span class="meta-comments">
                                    
                                    


    
        
    
        
    
        
            <a href="/categories/technology.html">
                技术摘录
            </a>
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    

                                </span>
                            
                            <!--<span class="meta-author"><a href="#blog-author">Candy Sharp</a></span>-->

                            <h1>微信分享到朋友圈、发送给朋友开发注意事项</h1>

                            <!-- 目录 -->
                            <div class="toc">
                            	<p class="toc-title">目录</p>
                            	<div class="toc-content"></div>
                            </div>
                            
                            
<p>最近开发微信活动的时候，发现分享到朋友圈和发送给朋友功能不稳定，时而有效时而无效，打开<code class="highlighter-rouge">debug</code>模式查看，发现多数报的数签名错误，仔细看了官方文档，最终问题出在ticket的缓存上。</p>

<h2 id="section">1、签名：</h2>

<ul>
  <li><code class="highlighter-rouge">url</code>：
需要根据不同的页面动态获取，<code class="highlighter-rouge">url</code>不能进行<code class="highlighter-rouge">encodeURIComponent</code>，否则验签会失败
<code class="highlighter-rouge">url</code>不能包括微信添加的#后边的部分，所以应该处理为：<code class="highlighter-rouge">window.location.href.split('#')[0]</code>
签名用的<code class="highlighter-rouge">url</code>必须是调用JS接口页面的完整URL。</li>
  <li><code class="highlighter-rouge">nonceStr</code>、<code class="highlighter-rouge">timestamp</code>：应该动态生成，而不能hardcode
签名用的<code class="highlighter-rouge">noncestr</code>和<code class="highlighter-rouge">timestamp</code>必须与<code class="highlighter-rouge">wx.config</code>中的<code class="highlighter-rouge">nonceStr</code>和<code class="highlighter-rouge">timestamp</code>相同</li>
  <li>为安全考虑，签名必须在后台进行，其他调用js在前台进行。</li>
</ul>

<h2 id="ticketaccesstoken">2、ticket和accesstoken：</h2>
<ul>
  <li><code class="highlighter-rouge">accesstoken</code>：同调用微信其他接口的<code class="highlighter-rouge">accesstoken</code>，必须全局缓存，以免影响其他业务，即是说：微信所有业务应该用同一个<code class="highlighter-rouge">accesstoken</code>去调用微信接口，而不能自己刷新<code class="highlighter-rouge">accesstoken</code>。</li>
  <li><code class="highlighter-rouge">ticket</code>：同<code class="highlighter-rouge">accesstoken</code>一样，必须全局缓存，方式很多，可以放到数据库，或者放到缓存。目前<code class="highlighter-rouge">ticket</code>的有效时间为2小时，所以2小时内<code class="highlighter-rouge">ticket</code>未过期时，不能重复获取，否则可能导致<code class="highlighter-rouge">ticket</code>获取次数超过限额，导致<code class="highlighter-rouge">sign</code>失败。</li>
</ul>

<h2 id="section-1">3、注意代码执行顺序</h2>
<p>首先应该获取签名，签名获取后在调用<code class="highlighter-rouge">wx.config</code>方法，然后再执行<code class="highlighter-rouge">wx.ready</code>、<code class="highlighter-rouge">wx.error</code>方法。</p>

<h2 id="section-2">4、其他</h2>
<p>每个页面加载完成后都应该重新从后台获取签名信息，避免签名失败</p>

<p>具体开发步骤详见<a target="_blank" href="http://mp.weixin.qq.com/wiki/11/74ad127cc054f6b80759c40f77ec03db.html">官方文档</a></p>

<h2 id="section-3">5、官方常见问题及处理方法：</h2>

<p>调用config 接口的时候传入参数 debug: true 可以开启debug模式，页面会alert出错误信息。以下为常见错误及解决方法：</p>

<h3 id="invalid-url-domain">1、invalid url domain</h3>
<p>当前页面所在域名与使用的appid没有绑定，请确认正确填写绑定的域名，如果使用了端口号，则配置的绑定域名也要加上端口号（一个appid可以绑定三个有效域名，见 目录1.1.1）。</p>

<h3 id="invalid-signature">2、invalid signature签名错误。</h3>
<p>建议按如下顺序检查：</p>

<ol>
  <li>
    <p>确认签名算法正确，可用 http://mp.weixin.qq.com/debug/cgi-bin/sandbox?t=jsapisign 页面工具进行校验。</p>
  </li>
  <li>
    <p>确认config中nonceStr（js中驼峰标准大写S）, timestamp与用以签名中的对应noncestr, timestamp一致。</p>
  </li>
  <li>
    <p>确认url是页面完整的url(请在当前页面alert(location.href.split(‘#’)[0])确认)，包括’http(s)://’部分，以及’？’后面的GET参数部分,但不包括’#’hash后面的部分。</p>
  </li>
  <li>
    <p>确认 config 中的 appid 与用来获取 jsapi_ticket 的 appid 一致。</p>
  </li>
  <li>
    <p>确保一定缓存access_token和jsapi_ticket。</p>
  </li>
  <li>
    <p>确保你获取用来签名的url是动态获取的，动态页面可参见实例代码中php的实现方式。
如果是html的静态页面在前端通过ajax将url传到后台签名，前端需要用js获取当前页面除去’#’hash部分的链接（可用location.href.split(‘#’)[0]获取,而且需要encodeURIComponent），因为页面一旦分享，微信客户端会在你的链接末尾加入其它参数，如果不是动态获取当前链接，将导致分享后的页面签名失败。</p>
  </li>
</ol>

<h3 id="the-permission-value-is-offline-verifying">3、the permission value is offline verifying</h3>

<p>这个错误是因为config没有正确执行，或者是调用的JSAPI没有传入config的jsApiList参数中。建议按如下顺序检查：</p>

<ol>
  <li>确认config正确通过。</li>
  <li>如果是在页面加载好时就调用了JSAPI，则必须写在wx.ready的回调中。</li>
  <li>确认config的jsApiList参数包含了这个JSAPI。</li>
</ol>

<h3 id="permission-denied">4、permission denied</h3>

<p>该公众号没有权限使用这个JSAPI，或者是调用的JSAPI没有传入config的jsApiList参数中（部分接口需要认证之后才能使用）。</p>

<h3 id="function-not-exist">5、function not exist</h3>

<p>当前客户端版本不支持该接口，请升级到新版体验。</p>

<h3 id="configok602ok">6、为什么6.0.1版本config:ok，但是6.0.2版本之后不ok</h3>

<p>因为6.0.2版本之前没有做权限验证，所以config都是ok，但这并不意味着你config中的签名是OK的，请在6.0.2检验是否生成正确的签名以保证config在高版本中也ok。</p>

<h3 id="iosandroid">7、在iOS和Android都无法分享</h3>

<p>请确认公众号已经认证，只有认证的公众号才具有分享相关接口权限，如果确实已经认证，则要检查监听接口是否在wx.ready回调函数中触发</p>

<h3 id="jsapiticket">8、服务上线之后无法获取jsapi_ticket，自己测试时没问题。</h3>

<p>因为access_token和jsapi_ticket必须要在自己的服务器缓存，否则上线后会触发频率限制。请确保一定对token和ticket做缓存以减少2次服务器请求，不仅可以避免触发频率限制，还加快你们自己的服务速度。目前为了方便测试提供了1w的获取量，超过阀值后，服务将不再可用，请确保在服务上线前一定全局缓存access_token和jsapi_ticket，两者有效期均为7200秒，否则一旦上线触发频率限制，服务将不再可用。</p>

<h3 id="uploadimage">9、uploadImage怎么传多图</h3>

<p>目前只支持一次上传一张，多张图片需等前一张图片上传之后再调用该接口</p>

<h3 id="section-4">10、没法对本地选择的图片进行预览</h3>

<p>chooseImage接口本身就支持预览，不需要额外支持</p>

<h3 id="abinvalid-signature">11、通过a链接(例如先通过微信授权登录)跳转到b链接，invalid signature签名失败</h3>

<p>后台生成签名的链接为使用jssdk的当前链接，也就是跳转后的b链接，请不要用微信登录的授权链接进行签名计算，后台签名的url一定是使用jssdk的当前页面的完整url除去’#’部分</p>

<h3 id="configfail">12、出现config:fail错误</h3>

<p>这是由于传入的config参数不全导致，请确保传入正确的appId、timestamp、nonceStr、signature和需要使用的jsApiList</p>

<h3 id="jsapi">13、如何把jsapi上传到微信的多媒体资源下载到自己的服务器</h3>

<p>请参见文档中uploadVoice和uploadImage接口的备注说明</p>

<h3 id="androidjssdk">14、Android通过jssdk上传到微信服务器，第三方再从微信下载到自己的服务器，会出现杂音</h3>

<p>微信团队已经修复此问题，目前后台已优化上线</p>

<h3 id="section-5">15、绑定父级域名，是否其子域名也是可用的</h3>

<p>是的，合法的子域名在绑定父域名之后是完全支持的</p>

<h3 id="ios6162">16、在iOS微信6.1版本中，分享的图片外链不显示，只能显示公众号页面内链的图片或者微信服务器的图片，已在6.2中修复</h3>

<h3 id="section-6">17、是否需要对低版本自己做兼容</h3>

<p>jssdk都是兼容低版本的，不需要第三方自己额外做更多工作，但有的接口是6.0.2新引入的，只有新版才可调用</p>

<h3 id="section-7">18、该公众号支付签名无效，无法发起该笔交易</h3>

<p>请确保你使用的jweixin.js是官方线上版本，不仅可以减少用户流量，还有可能对某些bug进行修复，拷贝到第三方服务器中使用，官方将不对其出现的任何问题提供保障，具体支付签名算法可参考 JSSDK微信支付一栏</p>

<h3 id="androidpushstateh5pushstateweb-appandroid62">19、目前Android微信客户端不支持pushState的H5新特性，所以使用pushState来实现web app的页面会导致签名失败，此问题已在Android6.2中修复</h3>

<h3 id="uploadimagechooseimageandroid">20、uploadImage在chooseImage的回调中有时候Android会不执行</h3>

<p>Android6.2会解决此问题，若需支持低版本可以把调用uploadImage放在setTimeout中延迟100ms解决</p>

<h3 id="require-subscribe">21、require subscribe错误说明你没有订阅该测试号，该错误仅测试号会出现</h3>

<h3 id="getlocationopenlocation">22、getLocation返回的坐标在openLocation有偏差</h3>

<p>因为getLocation返回的是gps坐标，openLocation打开的腾讯地图为火星坐标，需要第三方自己做转换，6.2版本开始已经支持直接获取火星坐标</p>

<h3 id="menuitemaddcontact">23、查看公众号（未添加）: “menuItem:addContact”不显示</h3>

<p>目前仅有从公众号传播出去的链接才能显示，来源必须是公众号</p>

<h3 id="icp">24、ICP备案数据同步有一天延迟，所以请在第二日绑定</h3>

<h2 id="section-8">6、示例：</h2>

<h3 id="ticket">1、后台获取ticket方法：</h3>
<pre>
/**
 * 缓存微信jssdk调用的ticket。
 *
 * @param appid
 * @return
 * @throws IOException
 */
public String cacheJsSDKTicket(String appid) throws IOException {
    Assert.hasLength(appid);
    String cachedTicket = spyMemcachedClient.get(WechatConst.Cache.CACHE_KEY + "TICKET");
    if (cachedTicket != null &amp;&amp; !"".equals(cachedTicket)) {
        LOG.info("Ticket exists, return directly ...");
        return cachedTicket;
    }
    LOG.info("Ticket not exists, get from weixin ...");
    String accessToken = weChatApi.getAccessToken(appid);
    String ticket = weChatApi.getJsApiTicket(accessToken);
    // 7200秒过期
    int timeOut = 7200;
    spyMemcachedClient.safeSet(WechatConst.Cache.CACHE_KEY + "TICKET", timeOut, ticket);
    return ticket;
}
</pre>

<p>这里我将ticket全局缓存到memorycache中。</p>

<h3 id="section-9">2、后台签名方法：</h3>

<pre>
@Override
    public String signJsSDK(String ticket, String url, String timestamp, String nonceStr) throws NoSuchAlgorithmException {
    Map&lt;String, Object&gt; map = new HashMap&lt;String, Object&gt;();
    map.put("noncestr", nonceStr);
    map.put("jsapi_ticket", ticket);
    map.put("timestamp", timestamp);
    map.put("url", url);
    String[] ss = {"noncestr", "jsapi_ticket", "timestamp", "url"};
    Arrays.sort(ss);
    String signStr = "";
    for (String s : ss) {
        signStr += s + "=" + map.get(s) + "&amp;";
    }
    signStr = signStr.substring(0, signStr.length() - 1);
    return new SHA1().getDigestOfString(signStr.getBytes());
}
</pre>

<h3 id="section-10">3、获取签名方法：</h3>
<pre>
public void getJsSdkInfo(CspServiceContext serviceContext) throws IOException, NoSuchAlgorithmException {
    MessageObject mo = serviceContext.getRequestData();
    String url = (String) mo.getValue("url");
    String appid = (String) mo.getValue("appid");
    String timestamp = Long.toString(System.currentTimeMillis() / 1000);
    String nonceStr = UUID.randomUUID().toString(); 
    // 缓存ticket
    String ticket = memoryCacheManager.cacheJsSDKTicket(appid);
    // 签名
    String sign = weChatApi.signJsSDK(ticket, url, timestamp, nonceStr); 
    Map&lt;String, Object&gt; resMap = new HashMap&lt;String, Object&gt;();
    resMap.put("appid", appid);
    resMap.put("ticket", ticket);
    resMap.put("sign", sign);
    resMap.put("nonceStr", nonceStr);
    resMap.put("timestamp", timestamp);

    Response resp = new Response(resMap);
    serviceContext.setResponseData(resp);
    serviceContext.setResult(Result.FAULT_RESULT);
}
</pre>

<h3 id="jssdk">4、前台获取jssdk：</h3>

<pre>
function _wechatConfig(o) {
        wx.config({
            debug: debug, // 开启调试模式,调用的所有api的返回值会在客户端alert出来，若要查看传入的参数，可以在pc端打开，参数信息会通过log打出，仅在pc端时才会打印。
            appId: o.appid, // 必填，公众号的唯一标识
            timestamp: o.timestamp, // 必填，生成签名的时间戳
            nonceStr: o.nonceStr, // 必填，生成签名的随机串
            signature: o.sign,// 必填，签名，见附录1
            jsApiList: [
                'onMenuShareTimeline',
                'onMenuShareAppMessage'
            ] // 必填，需要使用的JS接口列表，所有JS接口列表见附录2
        });
    }
 
    function _getWechatJsSdkInfo(callback) {
        var s = W.Storage.get(W.location.href + "_" + area);
            var appid ='wx7e80e8f93543a5c8';
            ajaxJsonCall('/wechat/service/WeChat.getJsSdkInfo.json', {
                url: W.location.href.split('#')[0],
                appid: appid
            }, function (data) {
                if (data.rtnCode === "000000") {
                    var o = data.responseData;
                    W.Storage.set(W.location.href + "_" + area, o, jsSdkTimeout);
                    callback(o);
                } else {
                    W.Storage.remove(W.location.href + "_" + area);
                }
            }, false);
    }

_getWechatJsSdkInfo(_wechatConfig);

wx.checkJsApi({
    jsApiList: [
        'getLocation',
        'onMenuShareTimeline',
        'onMenuShareAppMessage'
    ],
    success: function (res) {
        //alert(JSON.stringify(res));
    }
});
 
//var url = "www.zaichengdu.com" + app_path;
var url = curDomain;
function _shareAppMessage() {
    // 页面加载后设置微信分享给朋友的内容
    wx.onMenuShareAppMessage({
        title: '圣诞老人送礼啦，现金红包人人领！', // 分享标题
        desc: '“圣诞夺包”35000份礼包等你拆！', // 分享描述
        link: encodeURI(curDomain + '/christmas/service/ChristmasSockOnline.home.do?area=cd'),//encodeURI(window.location.href.replace('&amp;from=ad', '')), // 分享链接
        imgUrl: url + '/public/christmas/img/shorejoin.jpg', // 分享图标
        type: '', // 分享类型,music、video或link，不填默认为link
        dataUrl: '', // 如果type是music或video，则要提供数据链接，默认为空
        success: function () {
            // 用户确认分享后执行的回调函数
            //Message.toast.success("分享成功！").appear();
        },
        cancel: function () {
            // 用户取消分享后执行的回调函数
            //alert('cancel');
        }
    });
}
 
function _shareTimeline() {
    // 设置分享到朋友圈的内容
    wx.onMenuShareTimeline({
        title: '圣诞老人送礼啦，现金红包人人领！', // 分享标题
        link: encodeURI(curDomain + '/christmas/service/ChristmasSockOnline.home.do?area=cd'),//encodeURI(window.location.href.replace('&amp;from=ad', '')), // 分享链接
        imgUrl: url + '/public/christmas/img/shorejoin.jpg', // 分享图标
        success: function () {
            // 用户确认分享后执行的回调函数
            Message.toast.success("分享成功！").appear();
        },
        cancel: function () {
            // 用户取消分享后执行的回调函数
            //alert('cancel');
        }
    });
}
 
wx.ready(function () {
    // config信息验证后会执行ready方法，所有接口调用都必须在config接口获得结果之后，config是一个客户端的异步操作，所以如果需要在页面加载时就调用相关接口，则须把相关接口放在ready函数中调用来确保正确执行。对于用户触发时才调用的接口，则可以直接调用，不需要放在ready函数中。
    //alert('success');
    _shareAppMessage();
    _shareTimeline();
});
 
wx.error(function (res) {
    // config信息验证失败会执行error函数，如签名过期导致验证失败，具体错误信息可以打开config的debug模式查看，也可以在返回的res参数中查看，对于SPA可以在这里更新签名。
    //alert('error');
});
</pre>


                            <div class="tag-items">
                                <span class="small-text">Tags:</span>
                                
                                


  


  
      <a href="/tags.html#微信开发-ref">
      微信开发 <span>1</span></a>
  
      <a href="/tags.html#jssdk-ref">
      jssdk <span>1</span></a>
  
      <a href="/tags.html#分享-ref">
      分享 <span>1</span></a>
  
      <a href="/tags.html#签名-ref">
      签名 <span>1</span></a>
  







                            </div>
                        </div>
                        <!-- /.blog-content -->
                    </div>
                    <!-- /.post-blog -->

                    <wb:share-button appkey="1271833232" addition="full" type="button" ralateUid="1821809482"
                                     pic="http%3A%2F%2Fsunfuchang.github.io%2Fassets%2Fimages%2Fhead.jpg"></wb:share-button>

                    <ul class="pagination">
                        
                        <li class="prev">
                            <a style="border:none" href="/%E6%8A%80%E6%9C%AF%E6%91%98%E5%BD%95/2015/12/24/install-nexus-on-windows-for-maven" title="Install Nexus On Windows For Maven">
                                <span class="page-artitle-title">windows下使用nexus搭建maven私服的流程和说明</span> &laquo; 上一篇
                            </a>
                        </li>
                        
                        <!--<li><a href="/archive.html">文章列表</a></li>-->
                        
                        <li class="next">
                            <a style="border:none" href="/%E7%A0%94%E5%8F%91%E7%AE%A1%E7%90%86/2016/04/22/maven-profile-properties" title="Maven Profile Properties">下一篇 &raquo;
                                <span class="page-artitle-title">maven定义profile无法替换property属性值</span>
                            </a>
                        </li>
                        
                    </ul>

                    <!-- 多说评论框 start -->
                    <div class="ds-thread" data-thread-key="/%E6%8A%80%E6%9C%AF%E6%91%98%E5%BD%95/2015/12/29/weixin-jssdk-use"
                         data-title=" 微信分享到朋友圈、发送给朋友开发注意事项 "
                         data-url="http://sunfuchang.github.io/%E6%8A%80%E6%9C%AF%E6%91%98%E5%BD%95/2015/12/29/weixin-jssdk-use"></div>
                    <!-- 多说评论框 end -->
                </div>
                <!-- /.col-md-12 -->
            </div>
            <!-- /.row -->
        </div>
        <!-- /.col-md-8 -->

        <div class="col-md-4">
    <div class="sidebar">
        <div class="sidebar-widget">
            <h5 class="widget-title">About Me</h5>
            <div class="col-xs-12">
                <img src="/assets/images/head.jpg" style="width: 60%;" class="img-thumbnail">
            </div>
            <div class="col-xs-12">
                <h4>Dendy</h4>
                <!-- <div style="text-align:center;">
                    <wb:follow-button uid="1821809482" type="gray_3" width="100%" height="24" ></wb:follow-button>
                </div> -->
                <div style="text-align: left;margin-top: 10px;">
                    <p class="light-text">轻轻地，我走了，正如我轻轻地来！我挥一挥衣袖，不带走一片云彩！</p>
                </div>
            </div>
        </div>
        <!-- /.sidebar-widget -->
        <div class="sidebar-widget">
            <h5 class="widget-title">Categories</h5>

            <div class="row categories">
                <div class="col-md-12">
                    
                    
                    <li>
                        <a href="/categories/web_front.html" name="web_front">网络前端
                            
                            
                            
                            (2)
                            
                        </a>
                    </li>
                    
                    <li>
                        <a href="/categories/internet.html" name="internet">互联网
                            
                            
                            
                            (0)
                            
                        </a>
                    </li>
                    
                    <li>
                        <a href="/categories/technology.html" name="technology">技术摘录
                            
                            
                            
                            (5)
                            
                        </a>
                    </li>
                    
                    <li>
                        <a href="/categories/db.html" name="db">数据库
                            
                            
                            
                            (1)
                            
                        </a>
                    </li>
                    
                    <li>
                        <a href="/categories/architecture.html" name="architecture">架构设计
                            
                            
                            
                            (1)
                            
                        </a>
                    </li>
                    
                    <li>
                        <a href="/categories/life.html" name="life">生活杂谈
                            
                            
                            
                            (0)
                            
                        </a>
                    </li>
                    
                    <li>
                        <a href="/categories/dev_manage.html" name="dev_manage">研发管理
                            
                            
                            
                            (1)
                            
                        </a>
                    </li>
                    
                    <li>
                        <a href="/categories/mobile.html" name="mobile">移动开发
                            
                            
                            
                            (0)
                            
                        </a>
                    </li>
                    
                    <li>
                        <a href="/categories/system_management.html" name="system_management">系统运维
                            
                            
                            
                            (1)
                            
                        </a>
                    </li>
                    
                    <li>
                        <a href="/categories/program_lang.html" name="program_lang">编程语言
                            
                            
                            
                            (4)
                            
                        </a>
                    </li>
                    
                </div>
            </div>
            <!-- /.row -->
        </div>
        <!-- /.sidebar-widget -->
        <div class="sidebar-widget">
            <h5 class="widget-title">Link</h5>

            <div class="row categories">
                <div class="col-md-12">
                    <li><a target="_blank" href="http://blog.sina.com.cn/superbugs">新浪博客</a><br></li>
                    <li><a target="_blank" href="http://blog.csdn.net/z_Dendy">CSDN博客</a></li>
                </div>
            </div>
            <!-- /.row -->
        </div>

        <div class="sidebar-widget">
            <h5 class="widget-title">Recent Posts</h5>

            
            <div class="last-post clearfix">
                <div class="thumb pull-left">
                    <a href="#"><img
                            src="/assets/themes/medigo/images/includes/blogthumb4.jpg" alt=""></a>
                </div>
                <div class="content">
                    <span>2016年04月22日</span>
                    <h6>
                        <a href="/%E7%A0%94%E5%8F%91%E7%AE%A1%E7%90%86/2016/04/22/maven-profile-properties">
                            maven定义profile无法替换property属性值
                        </a>
                    </h6>
                </div>
            </div>
            
            <div class="last-post clearfix">
                <div class="thumb pull-left">
                    <a href="#"><img
                            src="/assets/themes/medigo/images/includes/blogthumb4.jpg" alt=""></a>
                </div>
                <div class="content">
                    <span>2015年12月24日</span>
                    <h6>
                        <a href="/%E6%8A%80%E6%9C%AF%E6%91%98%E5%BD%95/2015/12/24/install-nexus-on-windows-for-maven">
                            windows下使用nexus搭建maven私服的流程和说明
                        </a>
                    </h6>
                </div>
            </div>
            
            <div class="last-post clearfix">
                <div class="thumb pull-left">
                    <a href="#"><img
                            src="/assets/themes/medigo/images/includes/blogthumb0.jpg" alt=""></a>
                </div>
                <div class="content">
                    <span>2015年12月22日</span>
                    <h6>
                        <a href="/%E6%95%B0%E6%8D%AE%E5%BA%93/2015/12/22/query-performance-analysis-in-mysql">
                            MySQL慢查询分析
                        </a>
                    </h6>
                </div>
            </div>
            
            <div class="last-post clearfix">
                <div class="thumb pull-left">
                    <a href="#"><img
                            src="/assets/themes/medigo/images/includes/blogthumb2.jpg" alt=""></a>
                </div>
                <div class="content">
                    <span>2015年08月18日</span>
                    <h6>
                        <a href="/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/2015/08/18/EventEmitter-of-nodeJs">
                            node学习第三课——node的事件触发器EventEmitter
                        </a>
                    </h6>
                </div>
            </div>
            
            <div class="last-post clearfix">
                <div class="thumb pull-left">
                    <a href="#"><img
                            src="/assets/themes/medigo/images/includes/blogthumb0.jpg" alt=""></a>
                </div>
                <div class="content">
                    <span>2015年08月16日</span>
                    <h6>
                        <a href="/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/2015/08/16/web-module-of-nodeJs">
                            node学习第二课——node的模块
                        </a>
                    </h6>
                </div>
            </div>
            
            <div class="last-post clearfix">
                <div class="thumb pull-left">
                    <a href="#"><img
                            src="/assets/themes/medigo/images/includes/blogthumb4.jpg" alt=""></a>
                </div>
                <div class="content">
                    <span>2015年08月16日</span>
                    <h6>
                        <a href="/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/2015/08/16/web-chat-room-based-on-nodeJs">
                            node学习第一课——基于nodeJs的web聊天室程序
                        </a>
                    </h6>
                </div>
            </div>
            
            <div class="last-post clearfix">
                <div class="thumb pull-left">
                    <a href="#"><img
                            src="/assets/themes/medigo/images/includes/blogthumb0.jpg" alt=""></a>
                </div>
                <div class="content">
                    <span>2015年06月12日</span>
                    <h6>
                        <a href="/%E7%BD%91%E7%BB%9C%E5%89%8D%E7%AB%AF/2015/06/12/jquery-validator-api">
                            jQuery validator表单验证框架使用说明
                        </a>
                    </h6>
                </div>
            </div>
            
            <div class="last-post clearfix">
                <div class="thumb pull-left">
                    <a href="#"><img
                            src="/assets/themes/medigo/images/includes/blogthumb1.jpg" alt=""></a>
                </div>
                <div class="content">
                    <span>2015年06月10日</span>
                    <h6>
                        <a href="/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/2015/06/10/jvm-gc">
                            JVM垃圾回收器工作原理及使用实例介绍
                        </a>
                    </h6>
                </div>
            </div>
            
            <div class="last-post clearfix">
                <div class="thumb pull-left">
                    <a href="#"><img
                            src="/assets/themes/medigo/images/includes/blogthumb0.jpg" alt=""></a>
                </div>
                <div class="content">
                    <span>2015年05月9日</span>
                    <h6>
                        <a href="/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/2015/05/09/spring-architecture-and-design">
                            Spring框架的设计理念与设计模式分析
                        </a>
                    </h6>
                </div>
            </div>
            
            <div class="last-post clearfix">
                <div class="thumb pull-left">
                    <a href="#"><img
                            src="/assets/themes/medigo/images/includes/blogthumb0.jpg" alt=""></a>
                </div>
                <div class="content">
                    <span>2015年05月7日</span>
                    <h6>
                        <a href="/%E7%B3%BB%E7%BB%9F%E8%BF%90%E7%BB%B4/2015/05/07/linux-common-command">
                            linux常见操作整理
                        </a>
                    </h6>
                </div>
            </div>
            
            <!-- /.last-post -->
        </div>
        <!-- /.sidebar-widget -->

		<!-- /.sidebar-widget -->
        <div class="sidebar-widget">
            <h5 class="widget-title">Archives</h5>
            <div class="row categories">
                <div class="col-md-12">
	                
					


  

  
    
    
    
    

    <!--
    <li><span>April 22, 2016</span> &raquo; <a href="/%E7%A0%94%E5%8F%91%E7%AE%A1%E7%90%86/2016/04/22/maven-profile-properties">Maven Profile Properties</a></li>
    -->
    
      <h6 class="widget-title">2016年</h6></h2>
      <li><a href="/archive/2016-04.html">04月</a><br></li>
      

      
      
        <h6 class="widget-title">2015年</h6></h2>
        <li><a href="/archive/2016-12.html">12月</a><br></li>
      
    
  
    
    
    
    

    <!--
    <li><span>December 29, 2015</span> &raquo; <a href="/%E6%8A%80%E6%9C%AF%E6%91%98%E5%BD%95/2015/12/29/weixin-jssdk-use">Weixin Jssdk Use</a></li>
    -->
      

      
          
        
        
      
    
  
    
    
    
    

    <!--
    <li><span>December 24, 2015</span> &raquo; <a href="/%E6%8A%80%E6%9C%AF%E6%91%98%E5%BD%95/2015/12/24/install-nexus-on-windows-for-maven">Install Nexus On Windows For Maven</a></li>
    -->
      

      
          
        
        
      
    
  
    
    
    
    

    <!--
    <li><span>December 22, 2015</span> &raquo; <a href="/%E6%95%B0%E6%8D%AE%E5%BA%93/2015/12/22/query-performance-analysis-in-mysql">Query Performance Analysis In Mysql</a></li>
    -->
      

      
          
        
          <li><a href="/archive/2015-08.html">08月</a><br></li>
        
      
    
  
    
    
    
    

    <!--
    <li><span>August 18, 2015</span> &raquo; <a href="/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/2015/08/18/EventEmitter-of-nodeJs">Eventemitter Of Nodejs</a></li>
    -->
      

      
          
        
        
      
    
  
    
    
    
    

    <!--
    <li><span>August 16, 2015</span> &raquo; <a href="/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/2015/08/16/web-module-of-nodeJs">Web Module Of Nodejs</a></li>
    -->
      

      
          
        
        
      
    
  
    
    
    
    

    <!--
    <li><span>August 16, 2015</span> &raquo; <a href="/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/2015/08/16/web-chat-room-based-on-nodeJs">Web Chat Room Based On Nodejs</a></li>
    -->
      

      
          
        
          <li><a href="/archive/2015-06.html">06月</a><br></li>
        
      
    
  
    
    
    
    

    <!--
    <li><span>June 12, 2015</span> &raquo; <a href="/%E7%BD%91%E7%BB%9C%E5%89%8D%E7%AB%AF/2015/06/12/jquery-validator-api">Jquery Validator Api</a></li>
    -->
      

      
          
        
        
      
    
  
    
    
    
    

    <!--
    <li><span>June 10, 2015</span> &raquo; <a href="/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/2015/06/10/jvm-gc">Jvm Gc</a></li>
    -->
      

      
          
        
          <li><a href="/archive/2015-05.html">05月</a><br></li>
        
      
    
  
    
    
    
    

    <!--
    <li><span>May  9, 2015</span> &raquo; <a href="/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/2015/05/09/spring-architecture-and-design">Spring Architecture And Design</a></li>
    -->
      

      
          
        
        
      
    
  
    
    
    
    

    <!--
    <li><span>May  7, 2015</span> &raquo; <a href="/%E7%B3%BB%E7%BB%9F%E8%BF%90%E7%BB%B4/2015/05/07/linux-common-command">Linux Common Command</a></li>
    -->
      

      
          
        
        
      
    
  
    
    
    
    

    <!--
    <li><span>May  6, 2015</span> &raquo; <a href="/%E7%BD%91%E7%BB%9C%E5%89%8D%E7%AB%AF/2015/05/06/high-performance-javascript-noblocking-load">High Performance Javascript Noblocking Load</a></li>
    -->
      

      
          
        
        
      
    
  
    
    
    
    

    <!--
    <li><span>May  5, 2015</span> &raquo; <a href="/%E6%8A%80%E6%9C%AF%E6%91%98%E5%BD%95/2015/05/05/mybatis-dynamic-sql">Mybatis Dynamic Sql</a></li>
    -->
      

      
          
        
        
      
    
  
    
    
    
    

    <!--
    <li><span>May  5, 2015</span> &raquo; <a href="/%E6%8A%80%E6%9C%AF%E6%91%98%E5%BD%95/2015/05/05/build-blog-on-github">Build Blog On Github</a></li>
    -->
      

      
          
        
        
      
    
  
    
    
    
    

    <!--
    <li><span>May  4, 2015</span> &raquo; <a href="/%E6%8A%80%E6%9C%AF%E6%91%98%E5%BD%95/2015/05/04/install-jekyll-on-windows">Install Jekyll On Windows</a></li>
    -->
      

    
    
  



	            </div>
            </div>
        </div>
        <!-- /.sidebar-widget -->

        <!-- /.sidebar-widget -->
        <div class="sidebar-widget">
            <h5 class="widget-title">Tags</h5>
            <div class="tag-items" style="margin-top: 0px;">
                
                


  
      <a href="/tags.html#jekyll-ref">
      jekyll <span>2</span></a>
  
      <a href="/tags.html#安装-ref">
      安装 <span>1</span></a>
  
      <a href="/tags.html#windows-ref">
      windows <span>1</span></a>
  
      <a href="/tags.html#gem-ref">
      gem <span>1</span></a>
  
      <a href="/tags.html#ruby-ref">
      ruby <span>1</span></a>
  
      <a href="/tags.html#github-ref">
      github <span>1</span></a>
  
      <a href="/tags.html#博客-ref">
      博客 <span>1</span></a>
  
      <a href="/tags.html#mybatis-ref">
      mybatis <span>1</span></a>
  
      <a href="/tags.html#SQL-ref">
      SQL <span>1</span></a>
  
      <a href="/tags.html#动态-ref">
      动态 <span>1</span></a>
  
      <a href="/tags.html#高性能-ref">
      高性能 <span>1</span></a>
  
      <a href="/tags.html#javascript-ref">
      javascript <span>1</span></a>
  
      <a href="/tags.html#加载-ref">
      加载 <span>1</span></a>
  
      <a href="/tags.html#linux-ref">
      linux <span>1</span></a>
  
      <a href="/tags.html#command-ref">
      command <span>1</span></a>
  
      <a href="/tags.html#Spring-ref">
      Spring <span>1</span></a>
  
      <a href="/tags.html#architecture-ref">
      architecture <span>1</span></a>
  
      <a href="/tags.html#design-ref">
      design <span>1</span></a>
  
      <a href="/tags.html#JVM-ref">
      JVM <span>1</span></a>
  
      <a href="/tags.html#垃圾回收-ref">
      垃圾回收 <span>1</span></a>
  
      <a href="/tags.html#jQuery-ref">
      jQuery <span>1</span></a>
  
      <a href="/tags.html#validator-ref">
      validator <span>1</span></a>
  
      <a href="/tags.html#api-ref">
      api <span>1</span></a>
  
      <a href="/tags.html#nodeJs-ref">
      nodeJs <span>3</span></a>
  
      <a href="/tags.html#聊天室-ref">
      聊天室 <span>1</span></a>
  
      <a href="/tags.html#socket-ref">
      socket <span>1</span></a>
  
      <a href="/tags.html#modules-ref">
      modules <span>1</span></a>
  
      <a href="/tags.html#node_modules-ref">
      node_modules <span>1</span></a>
  
      <a href="/tags.html#exports-ref">
      exports <span>1</span></a>
  
      <a href="/tags.html#EventEmitter-ref">
      EventEmitter <span>1</span></a>
  
      <a href="/tags.html#mysql-ref">
      mysql <span>1</span></a>
  
      <a href="/tags.html#sql-ref">
      sql <span>1</span></a>
  
      <a href="/tags.html#performance-ref">
      performance <span>1</span></a>
  
      <a href="/tags.html#nexus-ref">
      nexus <span>1</span></a>
  
      <a href="/tags.html#maven-ref">
      maven <span>2</span></a>
  
      <a href="/tags.html#私服-ref">
      私服 <span>1</span></a>
  
      <a href="/tags.html#搭建-ref">
      搭建 <span>1</span></a>
  
      <a href="/tags.html#微信开发-ref">
      微信开发 <span>1</span></a>
  
      <a href="/tags.html#jssdk-ref">
      jssdk <span>1</span></a>
  
      <a href="/tags.html#分享-ref">
      分享 <span>1</span></a>
  
      <a href="/tags.html#签名-ref">
      签名 <span>1</span></a>
  
      <a href="/tags.html#profile-ref">
      profile <span>1</span></a>
  




            </div>
        </div>
        <!-- /.sidebar-widget -->

        <div class="sidebar-widget">
            <h5 class="widget-title">Weibo</h5>
            <div class="tag-items" style="margin-top: 0px;">
                <iframe width="100%" height="550" class="share_self"  frameborder="0" scrolling="no" src="http://widget.weibo.com/weiboshow/index.php?language=&width=0&height=550&fansRow=2&ptype=1&speed=0&skin=3&isTitle=1&noborder=1&isWeibo=1&isFans=1&uid=1821809482&verifier=02959ff0&dpc=1"></iframe>
            </div>
        </div>
    </div>
    <!-- /.sidebar -->
</div>
    </div>
    <!-- /.row -->
</div>
<!-- /.container -->

<footer class="site-footer">
      <div class="container">
            <div class="row">
                  <div class="col-md-12">
                        <nav class="footer-nav clearfix">
                              <ul class="footer-menu">
                                    <li><a href="/index.html">Home</a></li>
                                    <!--<li><a href="#">Portfolio</a></li>-->
                                    <li><a href="/blog/index.html">Blog</a></li>
                                    <!--<li><a href="#">Shortcodes</a></li>-->
                                    <li><a href="#">Contact</a></li>
                              </ul>
                            <ul class="sn" style="text-align: center; margin-top: 30px;">
                                <li><a href="http://weibo.com/superbugs" target="_blank" title="新浪微博"><span class="icon-img weibo"></span></a></li>
                                <li><a href="https://github.com/sunfuchang" target="_blank" title="GitHub"><span class="icon-img github"></span></a></li>
                                <li><a href="http://blog.sina.com.cn/superbugs" target="_blank" title="新浪博客"><span class="icon-img blog"></span></a></li>
                                <li><a href="https://twitter.com/sunfuchang" target="_blank" title="Twitter"><span class="icon-img twitter"></span></a></li>
                            </ul>
                              <!-- /.footer-menu -->
                        </nav>
                        <!-- /.footer-nav -->
                  </div>
                  <!-- /.col-md-12 -->
            </div>
            <!-- /.row -->
            <div class="row">
                  <div class="col-md-12">
                        <p class="copyright-text">Copyright &copy; 2016 fukas，sunfuchang03@126.com</p>
                  </div>
                  <!-- /.col-md-12 -->
            </div>
            <!-- /.row -->
      </div>
      <!-- /.container -->
</footer>
<!-- /.site-footer -->

<!-- Scripts -->
<script src="/assets/themes/medigo/js/min/plugins.min.js"></script>
<script src="/assets/themes/medigo/js/min/medigo-custom.min.js"></script>

<script src="http://tjs.sjs.sinajs.cn/open/api/js/wb.js" type="text/javascript" charset="utf-8"></script>
<!-- Templatemo Script -->

<script>
    var _hmt = _hmt || [];
    (function() {
        var hm = document.createElement("script");
        hm.src = "//hm.baidu.com/hm.js?7f4b9df646e2d704fdc6bb9cf7f261fb";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
    })();

    // 多说公共JS代码 start (一个网页只需插入一次)
    var duoshuoQuery = {short_name:"sunfuchang"};
    (function() {
        var ds = document.createElement('script');
        ds.type = 'text/javascript';ds.async = true;
        ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
        ds.charset = 'UTF-8';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();

    $(document).ready(function(){
        $("h2,h3,h4,h5,h6", ".blog-posts").each(function(i,item){
            var tag = $(item).get(0).localName;
            $(item).attr("id","toc"+i);
            $(".toc-content").append('<a class="toc'+tag+'" href="#toc'+i+'">'+$(this).text()+'</a></br>');
            $(".toch2").css("margin-left",0);
            $(".toch3").css("margin-left",20);
            $(".toch4").css("margin-left",40);
            $(".toch5").css("margin-left",60);
            $(".toch6").css("margin-left",80);
        });
    });
</script>
<script type="text/javascript">
    // $(document).ready(function(){
    //     $('#tree').ztree_toc({
    //         is_auto_number: true
    //     });
    // });
</script>
</body>
</html>
